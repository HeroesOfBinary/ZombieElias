<!DOCTYPE html>
<HTML>
	<head>
        <meta charset="UTF-8" />
		<title>Navigation Attempt</title>
			<style>
				* { margin: 0px; padding: 0px; }
				html, body {
					width: 100%; height: 100% 
						}
				canvas {
					border:1px solid red;
				}
			</style>
		<script language="javascript" src="jquery-1.10.2.js"></script>
		<script>
			window.onload = function(){
                // GLOBAL VARIBLES
				var canvas = document.getElementById("canvas");
				canvas.height = $(window).height();
				canvas.width = $(window).width();				
				
				
				
				var ctx = canvas.getContext("2d");

				var w = canvas.width;
				var h = canvas.height;
				var offsetX = 0;
				var offsetY = 0;
				var rectX = 0;
				var rectY = 0; 
				var rectangleBool = false;
				var rectangles = new Array();
				var goToPositionX = 0;
				var goToPositionY = 0;
				var rectanglePosY = 0;
				var rectanglePosX = 0;
				var originalPosX = 0;
				var originalPosY = 0;
				var rectangleWidth = 0;
				var mousePos = new Array();

                    
                // EVENT HANDLER
                function onMouseDown(evt){
					mouseDown = true;

				}
				function onMouseUp(evt){
					
					//rectangleBool;
					mouseDown = false;
					mousePos['downX'] = evt.pageX;
					mousePos['downY'] = evt.pageY;
					
					if (rectangleBool == true)
					{
						//alert("agasd");
						goToPositionX = mousePos['downX'];
						goToPositionY = mousePos['downY'];
					}
					else
					{
						//alert("ho");
						var rectanglePosY = mousePos['downY'];
						var rectanglePosX = mousePos['downX'];
						rectangleWidth = 10;
						//alert(mousePos['downX']);
						//alert(mousePos['downY']);
						//Rectanglez(mousePos['downX'], mousePos['downY'], rectangleWidth,random_color());
						rectangles.push(new rectangle(mousePos['downX'], mousePos['downY'], rectangleWidth,random_color()));
						//Rectanglez(100, 100, 10,random_color());
						rectangleBool = true;
					}
					//rectangles.push(new Rectangle(mousePos['downX'],mousePos['downY'],5+(Math.random()*10)));
				}
				function onMouseMove(evt){
					mousePos['currentX'] = evt.pageX;
					mousePos['currentY'] = evt.pageY;
				}    
				
				$(document).mousedown(onMouseDown);
				$(document).mouseup(onMouseUp);
				$(document).mousemove(onMouseMove);
				// $(window).bind("resize", resizeWindow);

                // GRAPHICS CODE
				function random_color(){
					var letter = "0123456789ABCDEF".split("");
					var color = "#";
					for(var i = 0; i < 6; i++){
						color += letter[Math.round(Math.random()*15)];
					}
					return color;
				}
				
				
				 function Rectanglez(x, y, w, c){
                        //draw a circle
                        ctx.beginPath();
                        ctx.rect(x, y, w, w);
                        ctx.closePath();
                        //fill
                        ctx.fillStyle = c;
                        ctx.fill();
                        //stroke
                        //ctx.lineWidth = r * 0.1;
                        ctx.strokeStyle = "#000000";
                        ctx.stroke();
                    }
					
				function drawGrid() {

					// move the grid
					//offsetX += 5;
					//offsetY += 5;
					if (offsetX == 20) {
						offsetX = 0;
					}
					if (offsetY == 20) {
						offsetY = 0;
					}
					rectX += 5;
					rectY += 5;
					if (rectX == w) {
						rectX = 0;
					}
					if (rectY == h) {
						rectY = 0;
					}
			
					ctx.save(); 
					//ctx.clearRect(0, 0, w, h);
					ctx.strokeStyle = "gray";
					ctx.beginPath();
					// vertical grid lines
					for (var x = offsetX; x < w; x += 20) {
						ctx.moveTo(x, 0);
						ctx.lineTo(x, h);
					}
					// horizontal grid lines
					for (var y = offsetY; y < h; y += 20) {
						ctx.moveTo(0, y);
						ctx.lineTo(w, y);
					}
					// "moving" rect
					//ctx.fillStyle = "red";
					//ctx.rect(rectX - 4, rectY - 4, 8, 8);

					//ctx.stroke();
					//ctx.fill();
					//ctx.restore(); */

				}                      
				
				//function draw_rectangle(){
					
				//	Rectanglez(this.x,this.y,this.r,this.c);
				//}
				
                // OBJECTS
                function rectangle(positionX, positionY, width, color ){
                        this.x = positionX;
                        this.y = positionY;
                        this.w = width;
                        this.c =  color;
                        this.draw = draw_rectangle;
                    }
				function draw_rectangle() {
					

					//ctx.clearRect(rectanglePosX,rectanglePosY,rectangleWidth,rectangleWidth);
					//ctx.clearRect(originalPosX,rectanglePosY,rectangleWidth,rectangleWidth);
					//alert(originalPosX);

					//if (originalPosX != goToPositionX && originalPosY != goToPositionY)
					//{
						 ctx.clearRect(this.x, this.y, this.w, this.w);
						if (this.y > goToPositionY)
						{

							this.y = this.y - 1; 
							//rectanglePosY = rectanglePosY-((rectanglePosY-goToPositionY) * .10);
						}
						else if (this.y < goToPositionY) 
						{
							this.y = this.y + 1;
							//rectanglePosY = rectanglePosY+((rectanglePosY+ goToPositionY) * .10);
						}
						
						if (this.x > goToPositionX)
						{
							//rectanglePosX = rectanglePosX - 1;
							this.x = this.x - 1;
							//rectanglePosX = rectanglePosX-((rectanglePosX-goToPositionX) * .10);
						}
						else if (this.x < goToPositionX) 
						{
							this.x = this.x + 1;
							//rectanglePosX = rectanglePosX+((rectanglePosX+ goToPositionX) * .10);
						}
						
						Rectanglez(this.x,this.y,this.w,this.c);
						//Rectanglez(rectanglePosX, rectanglePosY, rectangleWidth,random_color());
						
					//}
				}
                // GAME LOOP
				 setInterval(function () {
				 	 ctx.clearRect(0, 0, canvas.width, canvas.height);
					
					for(var i = 0; i < rectangles.length; i++){
                        rectangles[i].draw();
                        
                    }
                    ctx.fillStyle = "#000000";
					//drawGrid();
				}, 1);
				
                    
				
                // LETS GO!
                  /*  function init(){
                        ctx = $('#canvas')[0].getContext("2d");
                        canvas.height = $(window).height();
                        canvas.width = $(window).width();
                        return setInterval(game_loop, 10);
                    }
                    init();*/
            }
		</script>
	</head>
	<body>
		<canvas id="canvas"></canvas>
	</body>


</HTML>